<p>result works!</p>

<div class="max-w-6xl mx-auto p-8">
    <!-- Main Title -->
    <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">
      Verification Results
    </h2>
    
    <!-- Progress Overview -->
    <div class="bg-white p-6 rounded-lg shadow-md mb-8">
      <!-- Progress Bar -->
      <div class="h-3 w-full bg-gray-200 rounded-full mb-4">
        <div class="h-full bg-green-500 rounded-full transition-all duration-300"
             [style.width.%]="getCompletionPercentage()">
        </div>
      </div>

      <!-- Stats -->
      <div class="flex justify-around">
        <div class="text-center">
          <span class="text-gray-600 text-sm">Completed</span>
          <p class="font-semibold text-lg">
            {{ getCompletedCount() }}/{{ results.length }}
          </p>
        </div>
        <div class="text-center">
          <span class="text-gray-600 text-sm">Total Attempts</span>
          <p class="font-semibold text-lg">{{ getTotalAttempts() }}</p>
        </div>
      </div>
    </div>

    <!-- Results Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
      <!-- Result Cards -->
      <div *ngFor="let page of results" 
           class="bg-white rounded-lg shadow-md overflow-hidden"
           [ngClass]="{
             'border-l-4 border-green-500': page.isComplete && isPageValid(page),
             'border-l-4 border-red-500': page.isComplete && !isPageValid(page),
             'border-l-4 border-yellow-500': !page.isComplete
           }">
        
        <!-- Card Header -->
        <div class="p-4 bg-gray-50 flex items-center justify-between">
          <div class="flex items-center space-x-3">
            <i class="fas" [ngClass]="getIconClass(page.type)"></i>
            <h4 class="font-semibold text-gray-800">{{ getPageTitle(page) }}</h4>
          </div>
          <span *ngIf="page.attempts > 0" 
                class="px-2 py-1 text-xs rounded-full bg-gray-200 text-gray-700">
            {{ page.attempts }} attempt{{ page.attempts !== 1 ? 's' : '' }}
          </span>
        </div>

        <!-- Card Content -->
        <div class="p-4">
          <ng-container [ngSwitch]="page.type">
            
            <!-- Text Captcha Results -->
            <ng-container *ngSwitchCase="'TEXT'">
              <div *ngIf="page.isComplete && getTextCaptchaMetadata(page)" 
                   class="space-y-3">
                <div class="flex justify-between items-center">
                  <span class="text-gray-600">Expected:</span>
                  <span class="font-medium">
                    {{ getTextCaptchaMetadata(page)?.captchaCode }}
                  </span>
                </div>
                <div class="flex justify-between items-center">
                  <span class="text-gray-600">Provided:</span>
                  <span class="font-medium">
                    {{ getTextCaptchaMetadata(page)?.userInput }}
                  </span>
                </div>
              </div>
            </ng-container>

            <!-- Math Captcha Results -->
            <ng-container *ngSwitchCase="'MATH'">
              <div *ngIf="page.isComplete && getMathCaptchaMetadata(page)" 
                   class="space-y-3">
                <div class="flex justify-between items-center">
                  <span class="text-gray-600">Problem:</span>
                  <span class="font-medium">
                    {{ getMathCaptchaMetadata(page)?.problems?.num1 }}
                    {{ getMathCaptchaMetadata(page)?.problems?.operator }}
                    {{ getMathCaptchaMetadata(page)?.problems?.num2 }}
                  </span>
                </div>
                <div class="flex justify-between items-center">
                  <span class="text-gray-600">Your Answer:</span>
                  <span class="font-medium">
                    {{ getMathCaptchaMetadata(page)?.userInput }}
                  </span>
                </div>
                <div class="flex justify-between items-center">
                  <span class="text-gray-600">Correct Answer:</span>
                  <span class="font-medium">
                    {{ getMathCaptchaMetadata(page)?.problems?.answer }}
                  </span>
                </div>
                <div class="flex justify-between items-center">
                  <span class="text-gray-600">Difficulty:</span>
                  <span [ngClass]="{
                    'bg-green-100 text-green-800': getMathCaptchaMetadata(page)?.difficulty === 'easy',
                    'bg-yellow-100 text-yellow-800': getMathCaptchaMetadata(page)?.difficulty === 'normal',
                    'bg-red-100 text-red-800': getMathCaptchaMetadata(page)?.difficulty === 'hard'
                  }" class="px-2 py-1 rounded text-sm font-medium">
                    {{ getMathCaptchaMetadata(page)?.difficulty }}
                  </span>
                </div>
              </div>
            </ng-container>

            <!-- Image Captcha Results -->
            <ng-container *ngSwitchCase="'IMAGE'">
              <div *ngIf="page.isComplete && getImageCaptchaMetadata(page)" 
                   class="space-y-4">
                <div class="flex justify-between items-center">
                  <span class="text-gray-600">Challenge:</span>
                  <span class="font-medium">
                    {{ getImageCaptchaMetadata(page)?.imageCptcha?.challenge?.message }}
                  </span>
                </div>
                <div *ngIf="getImageCaptchaMetadata(page)?.userInput">
                  <span class="text-gray-600 block mb-2">Selected:</span>
                  <div class="grid grid-cols-2 gap-2">
                    @for (selection of getImageCaptchaMetadata(page)?.userInput; track $index) {
                      <div *ngIf="selection" class="bg-gray-50 p-2 rounded text-center text-sm">
                          {{ selection }}
                      </div>
                    }
                  </div>
                </div>
              </div>
            </ng-container>

          </ng-container>

          <!-- Status Badge -->
          <div *ngIf="page.isComplete" 
               class="mt-4 text-center">
            <span [ngClass]="{
              'bg-green-100 text-green-800': isPageValid(page),
              'bg-red-100 text-red-800': !isPageValid(page)
            }" class="px-4 py-2 rounded-full text-sm font-medium">
              {{ isPageValid(page) ? 'Passed' : 'Failed' }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <button (click)="getNewSession()"
            class="px-6 py-3 bg-red-500 hover:bg-red-600 text-white cursor-pointer font-medium rounded-lg transition-colors duration-200">
      New Session
    </button>

</div>